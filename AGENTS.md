# AGENTS.md

このドキュメントは、本リポジトリで作業するAIエージェント向けの共通ガイドラインです。プロジェクトの目的や開発フロー、守るべきルールを簡潔にまとめています。

## プロジェクト概要

- ブラウザでプレイできる三目並べ (Tic-Tac-Toe) アプリケーション
- Vue 3 (Composition API) と Tailwind CSS を用いたシングルページアプリ構成
- ゲーム履歴や統計情報を LocalStorage に保存し、勝率を可視化
- GitHub Actions を利用して GitHub Pages へ自動デプロイ

## コミュニケーションと言語ポリシー

- 会話・質問・要約・レビューコメントなど、すべて日本語で記述します
- コミットメッセージやプルリクエスト本文も日本語で統一します
- 不明点があれば作業を進める前に状況を整理し、根拠とともに質問を残してください

## セットアップと基本コマンド

```bash
# 依存関係をインストール
pnpm install

# 開発サーバーを起動 (http://localhost:5173)
pnpm dev

# 本番ビルドを生成
pnpm build

# ビルド結果のプレビュー
pnpm preview
```

> 現時点で自動テストスクリプトは提供されていません。必要に応じて手動での動作確認を行ってください。

## 技術スタック

- フロントエンド: Vue 3 (Composition API)
- 状態管理: Pinia
- ビルド/開発ツール: Vite
- スタイリング: Tailwind CSS、tailwindcss-motion
- アニメーション支援: @formkit/auto-animate
- パッケージ管理: pnpm

## ディレクトリ構造 (抜粋)

```
src/
|-- components/          # ボードやステータスなどのUIコンポーネント
|-- composables/         # Composition APIで共有するロジック (useGame など)
|-- stores/              # Pinia ストア (ゲーム履歴の永続化)
|-- App.vue              # ルートコンポーネント
|-- main.js              # エントリーポイント
|-- style.css            # Tailwind のカスタムスタイル
```

## アプリケーション構成メモ

- `useGame.js`: 盤面状態、ターン制御、勝敗判定、リセット処理を管理します
- `gameHistory.js`: LocalStorage に最新20件の結果を保存し、勝率を計算します
- `GameHistory.vue`: 履歴リストと統計情報を表示し、クリア操作を受け付けます
- 勝利時は対象セルをハイライト表示し、アニメーションで視覚的に分かるようにしています

## デプロイフロー

1. `main` ブランチへの push をトリガーに GitHub Actions が実行されます
2. pnpm で依存関係を復元し、`pnpm build` でビルドを作成します
3. 成果物が GitHub Pages (`https://kt-seed.github.io/codex-test_tic-tac-toe/`) に公開されます
4. プルリクエストではプレビュー環境 (`/pr-preview/pr-{番号}/`) が自動生成されます

## 開発フローとルール

- 新規作業は原則ブランチを切って行い、完了後にプルリクエストを作成します
- コミットメッセージは目的が一読で分かる粒度で書きます (例: `fix: 勝利判定の重複チェックを修正`)
- UI 変更時はスクリーンショットや挙動の説明をプルリクエストに添付するとレビューが円滑です
- 外部サービスとの通信やネットワークアクセスが必要な処理を追加する際は事前に相談してください

## 品質チェックリスト

- `pnpm build` が成功することを確認済みか
- X/O 双方で勝敗・引き分け判定が期待通りか手動で検証したか
- LocalStorage に履歴が保存・削除されることを確認したか
- 新規依存関係を追加した場合は理由と影響範囲を記述したか
- ユーザー向けテキストやドキュメントは日本語として自然か

## 補足情報

- Tailwind のコンパイル設定は `tailwind.config.js` ではなく Vite/Tailwind v4 の構成 (`postcss.config.js` 等) で管理しています
- `vite.config.js` の `base` オプションは GitHub Pages の公開パス (`/codex-test_tic-tac-toe/`) に合わせて設定されています。リポジトリ名が変わった場合は忘れずに修正してください
- 開発ツールを更新する際は pnpm-lock.yaml を含めた依存関係の更新を行い、ビルドと基本動作を再確認してください
